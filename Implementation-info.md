# Usage and Implementation

## How to run?

```
go run main.go filename
```

This command will run application with given file. It will create new file with name "example_output.csv" with application result.


## Implementation details

CSV files are processed with "encoding/csv" library.

Ладно, продолжу на русском.

## Описание объектов

Были созданы структуры для записей поданных на вход и для записей выдаваемых на выход.

Для входящих записей был создан метод, который создает эту запись из слайса с пятью строками.

Для всех типов записей был создан метод, который переводит их в csv.

### Фильтрация записей
Фильтр по датам вызывается в функции main независимо от флагов.

```cgo
func DateFilter(data []InputRecord, start time.Time) []InputRecord 
```

```golang
data, err = src.DateFilter(data, start)
```

### Агрегация amount

```cgo
func AggregateAmount(data []InputRecord) map[string]map[string]float64
```

Проходится по всем записям в массиве и суммирует amount для каждой пары (UserID, Currency)

### Агрегация fee.

Я не совсем понял, как сбор должен вычисляться для агрегированынх оредров. 
Даже если учитывать, зависит только от дня, то в таком случае она должна добавляться считаться один раз для каждого ореда.
Не совсем понимаю, какой смысл должна нести эта величина и таким образом не знаю, как ее проверить в рукописных тестах.

Могу предположить, что необходимые алгоритмы следующие:

1) Для каждого оредера посчитать fee по его дате, то есть считая только тот день, в который он был создан.
2) Просуммировать эти fee для каждой пары (UserID, Currency).

1) Для каждого ордера посчитать fee как какую-то фукнцию по всем дням которые этот ордер существует.
2) Взять некоторую агрегирующую функцию для каждой пары (UserID, Currency)

Whatever, может быть я просто уже не в кондиции об этом думать.

### Ввод вывод

Ввод происходит по одной строке, после чего она записывается в массив.
Вывод происходит по одной строке. 
Иначе говоря используются методы Read у csv.Reader и Write у csv.Writer. 
